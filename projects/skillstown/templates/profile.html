{% extends "base.html" %}

{% block title %}Profile - SkillsTown{% endblock %}

{% block content %}
<div class="container my-5">
    <div class="row">
        <div class="col-12">
            <div class="card shadow-sm mb-4">
                <div class="card-header bg-primary text-white">
                    <h3 class="mb-0">
                        <i class="fas fa-user-circle me-2"></i>Your Profile
                    </h3>
                </div>
                <div class="card-body">
                    <div class="row">
                        <div class="col-md-4 text-center">
                            <div class="profile-avatar mb-3">
                                <i class="fas fa-user-circle fa-5x text-primary"></i>
                            </div>
                            <h4>{{ current_user.username }}</h4>
                            <p class="text-muted">{{ current_user.email }}</p>
                        </div>
                        <div class="col-md-8">
                            <div class="row text-center">
                                <div class="col-sm-3">
                                    <div class="stat-box">
                                        <div class="stat-number">{{ stats.total }}</div>
                                        <div class="stat-label">Total Courses</div>
                                    </div>
                                </div>
                                <div class="col-sm-3">
                                    <div class="stat-box">
                                        <div class="stat-number">{{ stats.enrolled }}</div>
                                        <div class="stat-label">Enrolled</div>
                                    </div>
                                </div>
                                <div class="col-sm-3">
                                    <div class="stat-box">
                                        <div class="stat-number">{{ stats.in_progress }}</div>
                                        <div class="stat-label">In Progress</div>
                                    </div>
                                </div>
                                <div class="col-sm-3">
                                    <div class="stat-box">
                                        <div class="stat-number">{{ stats.completed }}</div>
                                        <div class="stat-label">Completed</div>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="mt-4">
                                <h5>Completion Progress</h5>
                                <div class="progress" style="height: 25px;">
                                    <div class="progress-bar bg-success" role="progressbar" 
                                         style="--width: {{ stats.completion_percentage }}%;">
                                        {{ stats.completion_percentage }}%
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="row">
                <div class="col-md-6">
                    <div class="card shadow-sm">
                        <div class="card-header bg-info text-white">
                            <h4 class="mb-0">
                                <i class="fas fa-clock me-2"></i>Recent Activity
                            </h4>
                        </div>
                        <div class="card-body">
                            {% if recent_courses %}
                                <div class="activity-list">
                                    {% for course in recent_courses %}
                                        <div class="activity-item">
                                            <i class="fas fa-graduation-cap text-primary"></i>
                                            <div class="activity-content">
                                                <h6>{{ course.course_name }}</h6>
                                                <small class="text-muted">
                                                    {{ course.category }} â€¢ {{ course.created_at.strftime('%B %d, %Y') }}
                                                </small>
                                            </div>
                                            <span class="badge bg-{{ 'success' if course.status == 'completed' else 'warning' if course.status == 'in_progress' else 'primary' }}">
                                                {{ course.status }}
                                            </span>
                                        </div>
                                    {% endfor %}
                                </div>
                            {% else %}
                                <p class="text-muted text-center">No recent activity</p>
                            {% endif %}
                        </div>
                    </div>
                </div>
                
                <div class="col-md-6">
                    <div class="card shadow-sm">
                        <div class="card-header bg-success text-white">
                            <h4 class="mb-0">
                                <i class="fas fa-rocket me-2"></i>Quick Actions
                            </h4>
                        </div>
                        <div class="card-body">
                            <div class="d-grid gap-2">
                                <a href="{{ get_url_for('search') }}" class="btn btn-outline-primary">
                                    <i class="fas fa-search me-2"></i>Find New Courses
                                </a>
                                <a href="{{ get_url_for('assessment') }}" class="btn btn-outline-info">
                                    <i class="fas fa-file-alt me-2"></i>Get CV Analysis
                                </a>
                                <a href="{{ get_url_for('enrolled_courses') }}" class="btn btn-outline-success">
                                    <i class="fas fa-graduation-cap me-2"></i>View All Courses
                                </a>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}